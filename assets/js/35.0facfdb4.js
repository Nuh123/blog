(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{380:function(t,s,a){"use strict";a.r(s);var r=a(42),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"deploy-sh-怎么用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-sh-怎么用"}},[t._v("#")]),t._v(" deploy.sh 怎么用")]),t._v(" "),a("p",[t._v("目前了解到三种使用方式，")]),t._v(" "),a("ol",[a("li",[t._v("双击使用")]),t._v(" "),a("li",[t._v("package.json 中添加npx类命令(bash deploy.sh)")]),t._v(" "),a("li",[t._v("直接输入 bash deploy.sh")])]),t._v(" "),a("p",[a("strong",[t._v("第一类：")]),t._v(" 最粗暴实用，但前提是deploy.sh文件配置的没毛病。第一次部署时由于打包命令配置错误，且bash错误之后一直闪退，无法及时得到错误信息，弄了好久才发现问题所在。"),a("br"),t._v(" "),a("strong",[t._v("第二类：")]),t._v(" 主要在windown端有问题，bash这条命令一直报错。"),a("br"),t._v(" "),a("strong",[t._v("第三类：")]),t._v(" 不存在闪退及无法运行问题，观察报错信息对配置文件进行修改，很快就配置成功。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),a("p",[t._v("我一开始git没配置秘钥，再加上打包命令字母输错，还有deploy.sh文件双击后报错闪退（真难）一直捕获不到错误原因耽误了好久，后面改为在命令行行输入bssh命令得到错误信息，修改对应的地方很快就解决了。")])]),t._v(" "),a("h2",{attrs:{id:"deploy-sh中几个难搞得点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-sh中几个难搞得点"}},[t._v("#")]),t._v(" deploy.sh中几个难搞得点")]),t._v(" "),a("h3",{attrs:{id:"deploy-sh的位置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-sh的位置"}},[t._v("#")]),t._v(" deploy.sh的位置")]),t._v(" "),a("p",[t._v("项目根目录，一定是项目根目录，也就是"),a("strong",[t._v("package.json 的同层")]),t._v("。层次高的一看deploy.sh文件的内容就能准确判断出，层次一般只要是现代前端基本也能猜对地方（我是靠懵的）。")]),t._v(" "),a("h3",{attrs:{id:"deploy-sh所需的前置条件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-sh所需的前置条件"}},[t._v("#")]),t._v(" deploy.sh所需的前置条件")]),t._v(" "),a("p",[t._v("准确配置"),a("strong",[t._v("打包命令")]),t._v(",只要是从官网复制的deploy.sh文件只依赖一项前面的设置，就是对打包命令的配置，具体配置见开发部分。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("env sh\n\n# 确保脚本抛出遇到的错误\nset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e\n\n# 生成静态文件\nnpm run docs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("build\n\n# 进入生成的文件夹\ncd docs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vuepress"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dist\n\n# 如果是发布到自定义域名\n# echo "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'www.example.com'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CNAME")]),t._v("\n\ngit init\ngit add "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),t._v("\ngit commit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n\n# 如果发布到 https"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io\n# git push "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f git@github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("git master\n\n# 如果发布到 https"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REPO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n# git push "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f git@github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REPO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("git master"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("gh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("pages\n\ncd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n")])])]),a("p",[t._v("如果是按照之前的文档配的话一般都没有问题。")]),t._v(" "),a("h3",{attrs:{id:"deploy-sh唯一需要修改的地方"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploy-sh唯一需要修改的地方"}},[t._v("#")]),t._v(" deploy.sh唯一需要修改的地方")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("div",{staticClass:"highlight-lines"},[a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("br"),a("div",{staticClass:"highlighted"},[t._v(" ")]),a("br"),a("br"),a("br")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("env sh\n\n# 确保脚本抛出遇到的错误\nset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("e\n\n# 生成静态文件\nnpm run docs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("build\n\n# 进入生成的文件夹\ncd docs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("vuepress"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dist\n\n# 如果是发布到自定义域名\n# echo "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'www.example.com'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CNAME")]),t._v("\n\ngit init\ngit add "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("A")]),t._v("\ngit commit "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n\n# 如果发布到 https"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io\n# git push "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f git@github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("git master\n\n# 如果发布到 https"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REPO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n# git push "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f git@github"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("USERNAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REPO")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("git master"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("gh"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("pages\n\ncd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("\n")])])]),a("p",[a("strong",[t._v("如果只是简单的部署到gitpage上（没对gitpage做域名映射），修改的代码就只有高亮行一条")]),t._v("。整个文件有三个地方可供自定义修改，也就是原始文件中对应的三处高亮，"),a("strong",[t._v("第一处")]),t._v("自定义域名的用处就是让你的gitpage页显示你自定义的域名，目前没有研究过。"),a("strong",[t._v("剩下的两处")]),t._v("分别对应发布到用户github下的page（一个github只有一个，且固定）和发布到用户github对应项目下的page（一个github可以通过创建不同仓库来实现多个）。")]),t._v(" "),a("p",[t._v("正常情况采用发布到项目下面的模式，也就是修改高亮行。有两处需注意")]),t._v(" "),a("ol",[a("li",[t._v("一般情况下有两个变量需要替换 "),a("code",[t._v("<USERNAME>")]),t._v("和"),a("code",[t._v("<REPO>")]),t._v("注意这两个是要带括号替换，（我第一次就把括号没替换掉，折腾了很久）分别对应用户github名和仓库名（区分大小写）。")]),t._v(" "),a("li",[t._v("ssh问题，注释中使用的https模式，但命令中却是ssh模式，两种解决方案，git没有配置ssh的配置一下，或者将命令中修改为https模式（没有试验过不知道会不会有其它坑）地址。至于git部分的知识不在这里过多赘述。")])])])}),[],!1,null,null,null);s.default=e.exports}}]);